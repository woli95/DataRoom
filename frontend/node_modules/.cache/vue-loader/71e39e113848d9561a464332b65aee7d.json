{"remainingRequest":"/home/woli/Projects/DataRoom/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/woli/Projects/DataRoom/frontend/src/components/profileSettings.vue?vue&type=style&index=0&id=71351d0c&scoped=true&lang=css","dependencies":[{"path":"/home/woli/Projects/DataRoom/frontend/src/components/profileSettings.vue","mtime":1610404804917},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/css-loader/dist/cjs.js","mtime":1607646038610},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1607646042274},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/postcss-loader/src/index.js","mtime":1607646041898},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1607646038494},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1607646042274}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Cmg0IHsKICBmb250LXNpemU6IDIwcHg7CiAgZm9udC1mYW1pbHk6IFJvYm90byxzZXJpZjsKICBjb2xvcjogYmx1ZTsKICB0ZXh0LXNoYWRvdzogMXB4IDJweCBhcXVhOwp9CiN0aXRsZSB7CiAgZm9udC1zaXplOiAyMHB4OwogIGZvbnQtZmFtaWx5OiBSb2JvdG8sc2VyaWY7CiAgY29sb3I6IGJsdWU7CiAgdGV4dC1zaGFkb3c6IDFweCAycHggYXF1YTsKfQojbWFpbiB7CiAgYm9yZGVyLXJpZ2h0OiA1cHggb3V0c2V0ICM0Njg0OTk7CiAgYm94LXNoYWRvdzogNHB4IDRweCA0cHggNHB4ICM0NjgxOTkKfQppbnB1dFt0eXBlPW51bWJlcl06Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24sCmlucHV0W3R5cGU9bnVtYmVyXTo6LXdlYmtpdC1vdXRlci1zcGluLWJ1dHRvbiB7CiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOwogIC1tb3otYXBwZWFyYW5jZTogbm9uZTsKICBhcHBlYXJhbmNlOiBub25lOwogIG1hcmdpbjogMDsKfQo="},{"version":3,"sources":["/home/woli/Projects/DataRoom/frontend/src/components/profileSettings.vue"],"names":[],"mappings":";AA2KA,CAAC,EAAE;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3B;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3B;AACA,CAAC,CAAC,CAAC,CAAC,EAAE;EACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpC;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAC5C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACxB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACrB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AACX","file":"/home/woli/Projects/DataRoom/frontend/src/components/profileSettings.vue","sourceRoot":"","sourcesContent":["<template>\n  <div id=\"main\" class=\"container white\">\n    <div class=\"row center-align\">\n      <b id=\"title\">S e t t i n g s</b>\n    </div>\n      <form action=\"javascript:void(0)\" id='updateProfileForm' @submit=\"submitForm('updateProfile')\" class=\"container-fluid\" style=\"margin: 5px 5px 5px 5px\">\n        <div class=\"row\">\n          <div class=\"input-field col s6 left-align \">\n            <input class=\"input\" type=\"text\" id=\"profileSettingsEmail\" disabled/>\n            <label for=\"profileSettingsEmail\" class=\"active\">Email address</label>\n          </div>\n          <div class=\"input-field col s6 right-align\">\n            <input class=\"input\" type=\"date\" id=\"profileSettingsCreateDate\" disabled>\n            <label for=\"profileSettingsCreateDate\" class=\"active\">Account created</label>\n          </div>\n        </div>\n          <div class=\"row\">\n            <div class=\"input-field col s6 left-align\">\n              <input class=\"input\" type=\"text\" id=\"profileSettingsFirstName\" minlength=\"3\"/>\n              <label for=\"profileSettingsFirstName\" class=\"active\">First name</label>\n            </div>\n            <div class=\"input-field col s6 right-align \">\n              <input class=\"input\" type=\"text\" id=\"profileSettingsSecondName\" minlength=\"2\"/>\n              <label for=\"profileSettingsSecondName\" class=\"active\">Second name</label>\n            </div>\n          </div>\n        <div class=\"row\">\n          <div class=\"input-field col s6 left-align \">\n            <input class=\"input\" type=\"number\" id=\"profileSettingsPhoneNumber\" min=\"111111111\" max=\"999999999\"/>\n            <label for=\"profileSettingsPhoneNumber\" class=\"active\">Phone number</label>\n          </div>\n          <div class=\"input-field col s6 right-align\">\n            <input class=\"input\" type=\"date\" id=\"profileSettingsBirthDate\"/>\n            <label for=\"profileSettingsBirthDate\" class=\"active\">Birthday date</label>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"input-field col\">\n            <button @click=\"openModal('password')\" type=\"button\" class=\"btn blue\">Change password</button>\n          </div>\n          <div class=\"input-field col\">\n            <button type=\"submit\" class=\"btn blue darken-2\">Update profile</button>\n          </div>\n          <div class=\"input-field col\">\n            <button @click=\"openModal('email')\" type=\"button\" class=\"btn blue\">Change email</button>\n          </div>\n          </div>\n      </form>\n    <div id=\"passwordChangeModal\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4 class=\"center-align\">Change password</h4>\n        <form @submit=\"submitForm('changePassword')\" id='changePasswordForm' action=\"javascript:void(0)\">\n          <div class=\"input-field\">\n            <input type=\"password\" id=\"profileSettingsNewPassword\" minlength=\"6\" required>\n            <label for=\"profileSettingsNewPassword\" class=\"active\">New password</label>\n          </div>\n          <div class=\"input-field\">\n            <input type=\"password\" id=\"profileSettingsNewRetypedPassword\" minlength=\"6\" required>\n            <label for=\"profileSettingsNewRetypedPassword\" class=\"active\">Retype new password</label>\n          </div>\n          <div class=\"input-field center-align\">\n            <button type=\"submit\" class=\"btn btn-blue\">Submit</button>\n          </div>\n        </form>\n      </div>\n    </div>\n    <div id=\"emailChangeModal\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4 class=\"center-align\">Change Email</h4>\n        <form @submit=\"submitForm('changeEmail')\" id='changeEmailForm' action=\"javascript:void(0)\">\n          <div class=\"input-field\">\n            <input type=\"email\" id=\"profileSettingsNewEmail\" required>\n            <label for=\"profileSettingsNewEmail\" class=\"active\">New Email</label>\n          </div>\n          <div class=\"input-field\">\n            <input type=\"password\" id=\"profileSettingsNewRetypedEmail\" required>\n            <label for=\"profileSettingsNewRetypedEmail\" class=\"active\">Retype new email</label>\n          </div>\n          <div class=\"input-field center-align\">\n            <p class=\"center-align\">After submit and successfully email change you will be logged out</p>\n            <button type=\"submit\" class=\"btn btn-blue\">Submit</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport M from \"materialize-css\";\n\nexport default {\n  name: 'profileSettings',\n  methods: {\n    openModal(which) {\n      if (which === 'email')\n        M.Modal.init(document.getElementById('emailChangeModal')).open();\n      else if (which === 'password')\n        M.Modal.init(document.getElementById('passwordChangeModal')).open();\n    },\n    async submitForm(form) {\n      if (form === 'changeEmail') {\n        const newMail = document.getElementById('profileSettingsNewEmail').value;\n        const retypedMail = document.getElementById('profileSettingsNewRetypedEmail').value;\n        if (newMail !== retypedMail)\n          M.toast({ html: 'Emails do not match', classes: 'rounded orange', displayLength: 2000 });\n        else {\n          await this.$root.changeUserEmail(newMail).then(async (response) => {\n            if (response[0] === true) {\n              document.getElementById('changeEmailForm').reset();\n              M.toast({html: 'Email address has been changed', classes: 'rounded green', displayLength: 2000});\n              await this.$root.logoutUser().then((response) => {\n                if (response[0] === true) {\n                  M.toast({ html: 'You have been logged out', classes: 'rounded green', displayLength: 2000 });\n                  this.$root.session_token = null;\n\n                } else\n                  M.toast({ html: response[1], classes: 'rounded orange', displayLength: 2000 });\n              });\n            }\n          });\n        }\n      }\n      else if (form === 'changePassword') {\n        const newPassword = document.getElementById('profileSettingsNewPassword').value;\n        const retypedPassword = document.getElementById('profileSettingsNewRetypedPassword').value;\n        if (newPassword !== retypedPassword) {\n          M.toast({ html: 'Passwords do not match', classes: 'rounded orange', displayLength: 2000 });\n        }\n        else {\n          await this.$root.changeUserPassword(newPassword).then((response) => {\n            if (response[0] === true) {\n              M.toast({ html: 'Password has been changed', classes: 'rounded green', displayLength: 2000 });\n              document.getElementById('changePasswordForm').reset();\n              M.Modal.getInstance(document.getElementById('passwordChangeModal')).close();\n            } else\n              M.toast({ html: response[1], classes: 'rounded orange', displayLength: 2000 });\n          });\n        }\n      }\n      else if  (form === 'updateProfile') {\n        const first_name = document.getElementById('profileSettingsFirstName').value;\n        const second_name = document.getElementById('profileSettingsSecondName').value;\n        const phone_number = document.getElementById('profileSettingsPhoneNumber').value.toString();\n        const birth_date = document.getElementById('profileSettingsBirthDate').value;\n        await this.$root.updateUserProfile(first_name, second_name, phone_number, birth_date).then((response) => {\n          if (response[0] === true)\n            M.toast({ html: 'Profile has been updated', classes: 'rounded green', displayLength: 2000 });\n          else\n            M.toast({ html: response[1], classes: 'rounded orange', displayLength: 2000 });\n        });\n      }\n    },\n  },\n  async beforeMount() {\n    await this.$root.getUserProfile().then((response) => {\n      if (response[0] === true) {\n        document.getElementById('profileSettingsFirstName').value = response[1][0][\"first_name\"];\n        document.getElementById('profileSettingsSecondName').value = response[1][0][\"second_name\"];\n        document.getElementById('profileSettingsPhoneNumber').value = response[1][0][\"phone\"];\n        document.getElementById('profileSettingsBirthDate').value = response[1][0][\"birth_date\"];\n        document.getElementById('profileSettingsEmail').value = response[1][0][\"email\"];\n        document.getElementById('profileSettingsCreateDate').value = response[1][0][\"created_date\"]\n      } else\n        M.toast({ html: response[1], classes: 'rounded red', displayLength: 2000 });\n    });\n  }\n}\n</script>\n\n<style scoped>\nh4 {\n  font-size: 20px;\n  font-family: Roboto,serif;\n  color: blue;\n  text-shadow: 1px 2px aqua;\n}\n#title {\n  font-size: 20px;\n  font-family: Roboto,serif;\n  color: blue;\n  text-shadow: 1px 2px aqua;\n}\n#main {\n  border-right: 5px outset #468499;\n  box-shadow: 4px 4px 4px 4px #468199\n}\ninput[type=number]::-webkit-inner-spin-button,\ninput[type=number]::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  margin: 0;\n}\n</style>"]}]}