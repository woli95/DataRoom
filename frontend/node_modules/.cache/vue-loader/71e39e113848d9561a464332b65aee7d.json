{"remainingRequest":"/home/woli/Projects/DataRoom/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/woli/Projects/DataRoom/frontend/src/components/profileSettings.vue?vue&type=style&index=0&id=71351d0c&scoped=true&lang=css","dependencies":[{"path":"/home/woli/Projects/DataRoom/frontend/src/components/profileSettings.vue","mtime":1606758514938},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/css-loader/dist/cjs.js","mtime":1605655761849},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1605655765241},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/postcss-loader/src/index.js","mtime":1605655764849},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1605655761733},{"path":"/home/woli/Projects/DataRoom/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1605655765241}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Cmg0IHsKICBmb250LXNpemU6IDIwcHg7CiAgZm9udC1mYW1pbHk6IFJvYm90byxzZXJpZjsKICBjb2xvcjogYmx1ZTsKICB0ZXh0LXNoYWRvdzogMXB4IDJweCBhcXVhOwp9CiN0aXRsZSB7CiAgZm9udC1zaXplOiAyMHB4OwogIGZvbnQtZmFtaWx5OiBSb2JvdG8sc2VyaWY7CiAgY29sb3I6IGJsdWU7CiAgdGV4dC1zaGFkb3c6IDFweCAycHggYXF1YTsKfQojbWFpbiB7CiAgYm9yZGVyLXJpZ2h0OiA1cHggb3V0c2V0ICM0Njg0OTk7CiAgYm94LXNoYWRvdzogNHB4IDRweCA0cHggNHB4ICM0NjgxOTkKfQo="},{"version":3,"sources":["/home/woli/Projects/DataRoom/frontend/src/components/profileSettings.vue"],"names":[],"mappings":";AAqLA,CAAC,EAAE;EACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3B;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAC3B;AACA,CAAC,CAAC,CAAC,CAAC,EAAE;EACJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACpC","file":"/home/woli/Projects/DataRoom/frontend/src/components/profileSettings.vue","sourceRoot":"","sourcesContent":["<template>\n  <div id=\"main\" class=\"container white\" style=\"margin: 10px 10px 10px 10px;\">\n    <div class=\"row center-align\">\n      <b id=\"title\">S e t t i n g s</b>\n    </div>\n      <form class=\"container-fluid\" style=\"margin: 5px 5px 5px 5px\">\n        <div class=\"row\">\n          <div class=\"input-field col s6 left-align \">\n            <input class=\"input\" type=\"text\" id=\"profileSettingsEmail\" disabled/>\n            <label for=\"profileSettingsEmail\" class=\"active\">Email address</label>\n          </div>\n          <div class=\"input-field col s6 right-align\">\n            <input class=\"input\" type=\"date\" id=\"profileSettingsCreateDate\" disabled>\n            <label for=\"profileSettingsCreateDate\" class=\"active\">Account created</label>\n          </div>\n        </div>\n          <div class=\"row\">\n            <div class=\"input-field col s6 left-align\">\n              <input class=\"input\" type=\"text\" id=\"profileSettingsFirstName\" minlength=\"3\"/>\n              <label for=\"profileSettingsFirstName\" class=\"active\">First name</label>\n            </div>\n            <div class=\"input-field col s6 right-align \">\n              <input class=\"input\" type=\"text\" id=\"profileSettingsSecondName\" minlength=\"2\"/>\n              <label for=\"profileSettingsSecondName\" class=\"active\">Second name</label>\n            </div>\n          </div>\n        <div class=\"row\">\n          <div class=\"input-field col s6 left-align \">\n            <input class=\"input\" type=\"number\" id=\"profileSettingsPhoneNumber\" min=\"111111111\" max=\"999999999\"/>\n            <label for=\"profileSettingsPhoneNumber\" class=\"active\">Phone number</label>\n          </div>\n          <div class=\"input-field col s6 right-align\">\n            <input class=\"input\" type=\"date\" id=\"profileSettingsBirthDate\"/>\n            <label for=\"profileSettingsBirthDate\" class=\"active\">Birthday date</label>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"input-field col\">\n            <button @click=updateProfile type=\"button\" class=\"btn blue\">Update profile</button>\n          </div>\n          <div class=\"input-field col\">\n            <button @click=openChangePasswordModal type=\"button\" class=\"btn blue\">Change password</button>\n          </div>\n          <div class=\"input-field col\">\n            <button @click=openChangeEmailModal type=\"button\" class=\"btn blue\">Change email</button>\n          </div>\n          </div>\n      </form>\n    <div id=\"passwordChangeModal\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4 class=\"center-align\">Change password</h4>\n        <form @submit=\"changePassword\" action=\"javascript:void(0)\">\n          <div class=\"input-field\">\n            <input type=\"password\" id=\"profileSettingsNewPassword\" minlength=\"6\" required>\n            <label for=\"profileSettingsNewPassword\" class=\"active\">New password</label>\n          </div>\n          <div class=\"input-field\">\n            <input type=\"password\" id=\"profileSettingsNewRetypedPassword\" minlength=\"6\" required>\n            <label for=\"profileSettingsNewRetypedPassword\" class=\"active\">Retype new password</label>\n          </div>\n          <div class=\"input-field center-align\">\n            <button type=\"submit\" class=\"btn btn-blue\">Submit</button>\n          </div>\n        </form>\n      </div>\n    </div>\n    <div id=\"emailChangeModal\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4 class=\"center-align\">Change Email</h4>\n        <form @submit=\"changeEmail\" action=\"javascript:void(0)\">\n          <div class=\"input-field\">\n            <input type=\"email\" id=\"profileSettingsNewEmail\" required>\n            <label for=\"profileSettingsNewEmail\" class=\"active\">New Email</label>\n          </div>\n          <div class=\"input-field\">\n            <input type=\"password\" id=\"profileSettingsNewRetypedEmail\" required>\n            <label for=\"profileSettingsNewRetypedEmail\" class=\"active\">Retype new email</label>\n          </div>\n          <div class=\"input-field center-align\">\n            <p class=\"center-align\">After submit and successfully email change you will be logged out</p>\n            <button type=\"submit\" class=\"btn btn-blue\">Submit</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport M from 'materialize-css';\n\nexport default {\n  name: 'profileSettings',\n  methods: {\n    updateData() {\n      document.getElementById('profileSettingsEmail').value = this.$root.$data.fb.auth().currentUser.email;\n      console.log(this.$parent.$data.currentClientInfo[4]);\n      document.getElementById('profileSettingsCreateDate').value = this.$parent.$data.currentClientInfo[4];\n      if (this.$parent.$data.currentClientInfo[1] != null) {\n        document.getElementById('profileSettingsFirstName').value = this.$parent.$data.currentClientInfo[1];\n      }\n      if (this.$parent.$data.currentClientInfo[2] != null) {\n        document.getElementById('profileSettingsSecondName').value = this.$parent.$data.currentClientInfo[2];\n      }\n      if (this.$parent.$data.currentClientInfo[3] != null) {\n        document.getElementById('profileSettingsBirthDate').value = this.$parent.$data.currentClientInfo[3];\n      }\n      if (this.$parent.$data.currentClientInfo[5] != null) {\n        document.getElementById('profileSettingsPhoneNumber').value = this.$parent.$data.currentClientInfo[5];\n      }\n    },\n    async updateProfile() {\n      const fn = document.getElementById('profileSettingsFirstName').value;\n      const sn = document.getElementById('profileSettingsSecondName').value;\n      const pn = document.getElementById('profileSettingsPhoneNumber').value;\n      const bd = document.getElementById('profileSettingsBirthDate').value;\n      if (pn.length !== 9) {\n        M.toast({ html: 'Enter valid phone number', classes: 'rounded orange', displayLength: 2000 });\n      }\n      else {\n        await axios.put(this.$root.$data.backend_url.concat('/client/', this.$root.$data.fb.auth().currentUser.uid.toString(), '/update'), {\n          first_name: fn,\n          second_name: sn,\n          phone_number: pn,\n          birth_date: bd\n        }).then(async (response) => {\n          if (response.data === 'OK') {\n            M.toast({html: 'Profile updated', classes: 'rounded green', displayLength: 2000});\n          }\n        });\n        await this.$parent.getClientInfo();\n      }\n    },\n    openChangePasswordModal() {\n      M.Modal.init(document.querySelectorAll('.modal'));\n      const elem = document.getElementById('passwordChangeModal');\n      const inst = M.Modal.getInstance(elem);\n      inst.open();\n    },\n    openChangeEmailModal() {\n      M.Modal.init(document.querySelectorAll('.modal'));\n      const elem = document.getElementById('emailChangeModal');\n      const inst = M.Modal.getInstance(elem);\n      inst.open();\n    },\n    async changePassword() {\n      const n = document.getElementById('profileSettingsNewPassword').value;\n      const retyped = document.getElementById('profileSettingsNewRetypedPassword').value;\n      if (n !== retyped) {\n        M.toast({ html: 'Password fields do not match', classes: 'rounded orange', displayLength: 2000 });\n      } else {\n        await this.$root.$data.fb.auth().currentUser.updatePassword(n);\n        M.toast({ html: 'Password updated', classes: \"rounded green\", displayLength: 2000 });\n        const elem = document.getElementById('passwordChangeModal');\n        const inst = M.Modal.getInstance(elem);\n        inst.close();\n      }\n    },\n    async changeEmail() {\n      const n = document.getElementById('profileSettingsNewEmail').value;\n      const retyped = document.getElementById('profileSettingsNewRetypedEmail').value;\n      if (n !== retyped) {\n        M.toast({ html: 'Email fields do not match', classes: 'rounded orange', displayLength: 2000 });\n      } else {\n        await this.$root.$data.fb.auth().currentUser.updateEmail(n);\n        M.toast({ html: 'Email updated', classes: \"rounded green\", displayLength: 2000 });\n        const elem = document.getElementById('emailChangeModal');\n        const inst = M.Modal.getInstance(elem);\n        inst.close();\n        await this.$parent.logout();\n      }\n    }\n  },\n  mounted() {\n    this.updateData();\n  }\n}\n</script>\n\n<style scoped>\nh4 {\n  font-size: 20px;\n  font-family: Roboto,serif;\n  color: blue;\n  text-shadow: 1px 2px aqua;\n}\n#title {\n  font-size: 20px;\n  font-family: Roboto,serif;\n  color: blue;\n  text-shadow: 1px 2px aqua;\n}\n#main {\n  border-right: 5px outset #468499;\n  box-shadow: 4px 4px 4px 4px #468199\n}\n</style>"]}]}